  <%= render "shared/navbar" %>
  <%= stylesheet_link_tag "landing_page" %>

  <div class="card flex-direction">
    <div class="card-image waves-effect waves-block waves-light">
      
    </div>
    <div class="card-content">
      <a class="card-title activator grey-text text-darken-4">Just For Today<i class="material-icons right"></i></a>
      
    </div>
    <div class="card-reveal">
      <span class="card-title grey-text text-darken-4"><i class="x material-icons right">close</i></span>

      
      <h1><%= @jft[ :date ] %></h1>
      <b><%= @jft[ :heading ] %></b><br />
      <small><%= @jft[ :page_num ] %><br /></small>
      <i>"<%= @jft[ :sub_heading ] %>"<br /></i>
      <%= @jft[ :basic_text_page_num ] %><br />
      <%= @jft[ :content ] %><br />
      <%= @jft[ :just_for_today ] %><br />

      <a href="https://www.na.org/">Copyright (c) 2007-2017,  NA World Services, Inc. All Rights Reserved</a><br />
    </div>
  </div>

  

  <div class="card-backend">
    <div class="profile-img">
      <%= image_tag info_img(current_user.infos.first.picture), width: '100%', class: "profile-img" %>
    </div> 
    
    <div class="row">
      <div class="col s12">
          <%= form_for @post, class: "new_message", style: "margin-bottom: 20px;" do |f| %>
            <%= f.text_area :body, class: "body"%>
            <%= f.submit class: "btn waves-effect waves-light" %>
          <% end %>
      </div>
    </div>      
  </div>
  <div id="messages">
    <%= render @posts %>
  </div>  

  <!-- <script>
    var request = new XMLHttpRequest ();
    const form = document.querySelector('[data_commentform]');
    const commentBox = document.querySelector('[data-comments]');
    const textBox = document.querySelector('[data_textbox]');

    const commentTemplate = comment => (
      ` 
      <div class="comment">
        <div class="card-block">
          <div class="row">
            <div class="col-md-2">
              <%= image_tag info_img(current_user.infos.first.picture), width: '100%', class: "profile-img-comment" %>
              <p><%= link_to ((first_name current_user) + " " + (last_name current_user)), profile_path, class: "comment-name" %></p>
                <div class="comment-start"></div>
                <style>
                  @import url('https://fonts.googleapis.com/css?family=Asap');
                </style>

                ${comment.value}
                <hr>
                <div class="utils">
                  <div data-like="${comment.id}">Like ${comment.likes}</div>
                  <div data-share="${comment.id}">Share</div>
                  <div data-comment="${comment.id}">Comment</div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>




      `
      );

    let comments = [];

    function renderComments() {
      const markup = comments.sort((a, b) => b.id - a.id).map(comment => commentTemplate(comment)).join('');
      commentBox.innerHTML = markup;
    }

    function addComment(comment) {
      comments.push({
        value: comment,
        id: Date.now().toString(),
        likes: 0,
      });
    }

    function deleteComment(id) {
      comments = comments.filter(({ id: currentID }) => currentID !== id);
    }

    function findById(id) {
      return comments.find(({ id: commentID }) => commentID === id);
    }



    commentBox.addEventListener('click', e => {
      if (e.target.dataset.like !== void 0) {
        const id = e.target.dataset.like;
        const comment = findById(id);
        comment.likes += 1;
        renderComments();
      }
    });

    form.addEventListener('submit', e => {
      e.preventDefault();
      if (textBox.value.trim() !== '') {
        addComment(textBox.value);
        renderComments();
        textBox.value = "";
      }
    });

  </script> -->
  



